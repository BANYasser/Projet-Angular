<div class="form-container">
  <form [formGroup]="form" (ngSubmit)="submit()">
    <button type="button" class="close-btn" (click)="close()" title="Fermer" aria-label="Fermer le formulaire">&times;</button>

    <h2>{{ selectedSale ? 'Modifier la Vente' : 'Enregistrer une Vente' }}</h2>

  <div class="form-group">
    <label for="medicineId">Médicament</label>
    <select id="medicineId" formControlName="medicineId" required>
      <option [ngValue]="null" disabled>Sélectionnez un médicament</option>
      <option *ngFor="let med of medicines" [ngValue]="med.id">
        {{ med.name }} (Stock: {{ med.stock }})
      </option>
    </select>
  </div>

  <div class="form-group">
    <label for="quantity">Quantité</label>
    <input id="quantity" type="number" formControlName="quantity" min="1" required />
  </div>

  <div class="form-group">
    <label for="date">Date</label>
    <input id="date" type="date" formControlName="date" />
  </div>

  <div *ngIf="error" class="error-message">{{ error }}</div>

  <button type="submit" [disabled]="form.invalid">
    {{ selectedSale ? 'Modifier' : 'Enregistrer' }}
  </button>
  <button *ngIf="selectedSale" type="button" class="delete-btn" (click)="delete()" aria-label="Supprimer la vente">Supprimer</button>
  </form>
</div>
